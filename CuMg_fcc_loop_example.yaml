# Example: Cu-Mg FCC Alloy with Percentage Loop
# This demonstrates the three loop modes

# ------------------------------------------------------------------------------
output_path: "CuMg_fcc_test"        # Output directory for all results
job_name: "CuMg"                    # Job identifier (used in file names)

# Structure Input
cif_file: null
lat: 2                              # FCC
a: 3.61                            # Lattice parameter a (Angstroms)
b: null
c: null
alpha: null
beta: null
gamma: null
sites:
  - position: [0, 0, 0]
    elements: ['Cu', 'Mg']
    concentrations: [0.5, 0.5]     # Initial values (will be overwritten by loop)

# Alloy Percentage Loop Configuration
# IMPORTANT: Only ONE mode at a time! Comment out the others.

# --- MODE 1: Explicit List ---
# Specify exact compositions you want to test
loop_perc:
  enabled: true
  step: null
  start: null
  end: null
  site_index: 0
  element_index: null
  phase_diagram: false
  percentages:
    - [0, 100]      # Pure Mg
    - [25, 75]      # Cu25Mg75
    - [50, 50]      # Cu50Mg50
    - [75, 25]      # Cu75Mg25
    - [100, 0]      # Pure Cu

# --- MODE 2: Phase Diagram ---
# Uncomment to generate all valid compositions
# loop_perc:
#   enabled: true
#   step: 10                        # Will generate: 0%, 10%, 20%, ..., 100%
#   start: null
#   end: null
#   site_index: 0
#   element_index: null
#   phase_diagram: true             # Generate all combinations
#   percentages: null

# --- MODE 3: Single Element Sweep ---
# Uncomment to vary one element systematically
# loop_perc:
#   enabled: true
#   step: 20                        # Step size in percentage
#   start: 0                        # Start at 0%
#   end: 100                        # End at 100%
#   site_index: 0                   # Which site to vary
#   element_index: 0                # Vary Cu (0=Cu, 1=Mg)
#   phase_diagram: false
#   percentages: null

# --- NO LOOP (Normal Mode) ---
# Uncomment for single composition (no loop)
# loop_perc: null

# Input File Preparation Mode
prepare_only: true                  # Create input files only, don't run calculations
                                    # Set to false to run full calculations

# Parameter Ranges
ca_ratios: null                     # Calculate from structure
sws_values: null                    # Calculate from structure
initial_sws: [2.67]                 # SWS value for c/a optimization
auto_generate: true                 # Auto-generate ranges
ca_step: 0.02                       # Step size for c/a range
sws_step: 0.05                      # Step size for SWS range
n_points: 7                         # Number of points in range

# EMTO Calculation Parameters
dmax: 1.8
magnetic: "P"
user_magnetic_moments: {'Cu': 0.0, 'Mg': 0.0}

# Optimization Settings
optimize_ca: false                  # Disable for quick test
optimize_sws: false
optimize_dmax: false
dmax_initial: 2.0
dmax_target_vectors: 100
dmax_vector_tolerance: 15

# Execution Settings
run_mode: "local"
prcs: 8
slurm_account: "naiss2025-1-38"
slurm_time: "02:00:00"
slurm_partition: "main"
create_job_script: true
job_mode: "serial"

# Executable paths
eos_executable: "/home/x_pamca/postdoc_proj/emto/bin/eos.exe"
kstr_executable: "/home/x_pamca/postdoc_proj/emto/bin/kstr.exe"
shape_executable: "/home/x_pamca/postdoc_proj/emto/bin/shape.exe"
kgrn_executable: "/home/x_pamca/postdoc_proj/emto/bin/kgrn_mpi.x"
kfcd_executable: "/home/x_pamca/postdoc_proj/emto/bin/kfcd.exe"

# Analysis Settings
eos_type: "MO88"
generate_plots: true
export_csv: true
plot_format: "png"
generate_dos: false
dos_plot_range: [-0.8, 0.15]

# Job monitoring settings
poll_interval: 30
max_wait_time: 7200
timeout_action: "stop"
skip_existing: false
save_intermediate: true
cleanup_temp: false
log_level: "INFO"
# ------------------------------------------------------------------------------
