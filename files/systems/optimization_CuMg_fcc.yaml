# ==============================================================================
# EMTO Optimization Workflow Configuration Template
# ==============================================================================
# This file contains ALL possible configuration options.
# Uncomment and modify as needed for your calculation.

# ------------------------------------------------------------------------------
# Basic Settings (REQUIRED)
# ------------------------------------------------------------------------------
output_path: "CuMg_alloy_yaml_version"           # Output directory
job_name: "CuMg_fcc"               # Job identifier

# ------------------------------------------------------------------------------
# Structure Input (REQUIRED - choose ONE approach)
# ------------------------------------------------------------------------------
# Option A: CIF file (recommended for known structures)
cif_file: Null

Option B: Lattice parameters (for alloys or custom structures)
lat: 2                               # EMTO lattice type (1-14)
a: 3.6                              # Lattice parameter a (Angstroms)
#b: null                              # Lattice parameter b (default: a)
#c: null                              # Lattice parameter c
#alpha: 90                            # Lattice angle alpha (degrees)
#beta: 90                             # Lattice angle beta (degrees)
#gamma: 90                            # Lattice angle gamma (degrees)
sites:                               # Atomic sites
  - position: [0.0, 0.0, 0.0]
    elements: ["Cu", "Mg"]
    concentrations: [0, 1]

# ------------------------------------------------------------------------------
# Optimization Settings (REQUIRED)
# ------------------------------------------------------------------------------
#optimize_ca: true                      # Run c/a ratio optimization
optimize_sws: true                     # Run SWS optimization

# DMAX optimization settings (optional)
optimize_dmax: false                   # Enable DMAX optimization
dmax_initial: 2.0                      # Initial DMAX guess for optimization
dmax_target_vectors: 100               # Target number of k-vectors
dmax_vector_tolerance: 15              # Acceptable deviation (Â±N vectors)
kstr_executable: null                  # Path to KSTR executable (required if optimize_dmax=true)
                                       # Example: "/home/user/emto/bin/kstr.exe"

# ------------------------------------------------------------------------------
# Parameter Ranges (choose ONE option for each)
# ------------------------------------------------------------------------------
# Option 1: Single value (auto-generate range around it)
#ca_ratios: 0.95                        # Experimental c/a ratio
#sws_values: 2.86                       # Experimental SWS

# Option 2: List of values (use as-is)
# ca_ratios: [0.89, 0.91, 0.93, 0.95, 0.97, 0.99, 1.01]
# sws_values: [2.77, 2.80, 2.83, 2.86, 2.89, 2.92, 2.95]

# Option 3: Auto-calculate from structure
# ca_ratios: null
# sws_values: null

# Initial SWS for c/a optimization (required if optimize_ca=true)
#initial_sws: [2.82]

# ------------------------------------------------------------------------------
# Range Generation Parameters (OPTIONAL - for auto-generation)
# ------------------------------------------------------------------------------
ca_step: 0.02                          # Step size for c/a range (default: 0.02)
sws_step: 0.05                         # Step size for SWS range (default: 0.05)
n_points: 7                            # Number of points in range (default: 7)

# ------------------------------------------------------------------------------
# EMTO Calculation Parameters (REQUIRED)
# ------------------------------------------------------------------------------
dmax: 1.52                             # Maximum distance parameter
magnetic: "P"                          # Magnetic type: "P" (paramagnetic) or "F" (ferromagnetic)
functional: "GGA"                      # Exchange-correlation functional: "GGA", "LDA", "LAG" (default: "GGA")

# Optional EMTO parameters (usually auto-detected from structure)
# NL: 3                                # Maximum angular momentum
# NQ3: 4                               # Number of atoms
# fractional_coords:                   # Fractional coordinates (if not from CIF)
#   - [0.0, 0.5, 0.5]
#   - [0.5, 0.0, 0.5]
#   - [0.0, 0.0, 0.0]
#   - [0.5, 0.5, 0.0]

# Custom magnetic moments (optional)
# user_magnetic_moments:
#   Fe: 2.5
#   Pt: 0.4

# ------------------------------------------------------------------------------
# Execution Settings (REQUIRED)
# ------------------------------------------------------------------------------
run_mode: "sbatch"                     # "sbatch" (SLURM) or "local"

# SLURM settings (required if run_mode="sbatch")
slurm_account: "naiss2025-1-38"        # SLURM account
slurm_time: "02:00:00"                 # Time limit (HH:MM:SS)
slurm_partition: "main"                # SLURM partition
prcs: 8                                # Number of processors

# Job script settings
# job_script_name: "run_calc.sh"       # Name of generated job script
# job_mode: "serial"                   # "serial" or "parallel"

# ------------------------------------------------------------------------------
# EOS Settings (REQUIRED)
# ------------------------------------------------------------------------------
eos_executable: "/home/user/emto/bin/eos.exe"  # Path to EOS executable
eos_type: "MO88"                       # EOS fit type: MO88, POLN, SPLN, MU37, ALL

# ------------------------------------------------------------------------------
# Analysis Settings (OPTIONAL)
# ------------------------------------------------------------------------------
generate_plots: true                   # Generate EOS and DOS plots
export_csv: true                       # Export results to CSV
plot_format: "png"                     # Plot format: png, pdf, svg

# DOS analysis settings
# generate_dos: true                   # Generate DOS files
# dos_plot_range: [-0.8, 0.15]        # Energy range for DOS plots (eV)

# Reference values for percentage calculations (optional)
# reference_ca: null                   # Reference c/a ratio
# reference_sws: null                  # Reference SWS
# reference_volume: null               # Reference volume

# ------------------------------------------------------------------------------
# Workflow Mode (OPTIONAL)
# ------------------------------------------------------------------------------
# prepare_only: false                  # Prepare input files only, don't run calculations (default: false)

# ------------------------------------------------------------------------------
# Advanced Settings (OPTIONAL)
# ------------------------------------------------------------------------------
# skip_existing: false                 # Skip calculations if output exists
# save_intermediate: true              # Save intermediate results
# cleanup_temp: false                  # Remove temporary files after completion
# log_level: "INFO"                    # Logging level: DEBUG, INFO, WARNING, ERROR

# Job monitoring settings
# poll_interval: 30                    # Check job status every N seconds
# max_wait_time: 7200                  # Maximum wait time (seconds)
# timeout_action: "stop"               # Action on timeout: stop, continue, retry

# ------------------------------------------------------------------------------
# Alloy Percentage Loop (OPTIONAL)
# ------------------------------------------------------------------------------
# Enables systematic variation of alloy composition
# See ALLOY_LOOP_USAGE.md for detailed documentation
# loop_perc:
#   enabled: true                      # Enable composition loop
#   start: 0                           # Starting percentage (default: 0)
#   end: 100                           # Ending percentage (default: 100)
#   step: 10                           # Percentage step size (default: 10)
#   site_index: 0                      # Site index to vary (0-based, default: 0)
#   element_index: 0                   # Element index within site (0-based, default: 0)
#   phase_diagram: false               # Generate phase diagram data (default: false)
#   percentages: null                  # Custom list of percentages (overrides start/end/step)
